{"version":3,"sources":["Select.jsx"],"names":["chaining","fns","args","i","length","apply","BUILT_IN_PLACEMENTS","bottomLeft","points","offset","overflow","adjustX","adjustY","topLeft","bottomRight","BUILT_IN_PLACEMENTS_LABEL","Select","props","nextProps","optionsInfo","getOptionsInfoFromProps","setState","value","getValueFromProps","combobox","inputValue","getLabelBySingleValue","filterValue","val","onFilterChange","onInputValueChange","tokenSeparators","onInput","nextValue","getValueByInput","undefined","fireChange","setOpenState","setInputValue","open","event","target","filter","needExpand","_focused","clearBlurTime","timeoutFocus","updateFocusClassName","setTimeout","filterInput","selectTriggerRef","getFilterInput","focus","disabled","keyCode","state","getInputDOMNode","onInputKeyDown","KeyCode","ENTER","DOWN","preventDefault","BACKSPACE","removeSelected","openIfHasChildren","stopPropagation","ESC","menu","getInnerMenu","onKeyDown","handleBackfill","item","selectedValue","lastValue","fireSelect","concat","skipAdjustOpen","clearAdjustTimer","skipAdjustOpenTimer","backfillValue","optionLabelProp","domEvent","type","autoClearSearchValue","e","onDropdownVisibleChange","_mouseDown","maybeFocus","blurTimer","showSearch","defaultActiveFirstOption","options","_options","firstOption","key","blurChange","onBlur","getVLForOnChange","onClear","triggerRef","forcePopupAlign","defaultValue","labelInValue","map","v","getOptionsFromChildren","children","oldOptionsInfo","forEach","option","singleValue","label","getLabelFromOption","title","info","defaultLabel","defaultInfo","getOptionInfoBySingleValue","values","getOptionBySingleValue","Children","child","isSelectOptGroup","push","Object","keys","join","vls_","vls","vl","dropdownContainer","document","createElement","body","appendChild","placeholder","prefixCls","border","inputElement","getInputElement","id","inputCls","className","ref","onChange","onInputChange","topCtrlRef","querySelector","inputRef","inputMirrorRef","getPopupDOMNode","needFocus","nextState","fireSearch","onSearch","string","multiple","hasNewValue","getValueByLabel","_open","selectionRef","blur","backfill","input","defaultFilter","defaultFilterFn","filterFn","filterOption","call","focusTimer","clearFocusTime","onFocus","clearTimeout","rootRef","add","remove","activeElement","selectedKey","isChildDisabled","isDefaultPrevented","onChoiceItemClick","getVLBySingleValue","index","canMultiple","onDeselect","onChoiceRemove","count","onSelect","getOptionsBySingleValue","some","childValue","hiddenForNoOptions","renderFilterOptions","tags","notFoundContent","showNotFindInputItem","showNotFindSelectedItem","menuItems","childrenKeys","renderFilterOptionsFromChildren","indexOf","String","menuItem","UNSELECTABLE_STYLE","UNSELECTABLE_ATTRIBUTE","notFindInputItem","every","unshift","preventDefaultEvent","loading","spinning","sel","innerItems","isSelectOption","name","displayName","choiceRemove","maxTagTextLength","maxTagCount","maxTagPlaceholder","choiceRender","innerNode","opacity","showSelectedValue","selectedValueNodes","limitedCountValue","maxTagPlaceholderEl","slice","omittedValues","content","choiceClassName","li","handleChoiceItemClick","bind","isChoiceRemove","foundValue","display","getPlaceholderElement","renderClear","showArrow","onArrowClick","getAttribute","newValues","Set","Array","from","defaultOpen","adjustOpenState","autoFocus","inputNode","mirrorNode","getInputMirrorDOMNode","style","width","clientWidth","onChoiceAnimationLeave","removeChild","builtinPlacements","allowClear","clear","onClearSelection","hasValue","getLabel","ctrlNode","renderTopControlNode","extraSelectionProps","tabIndex","rootCls","onPopupFocus","onMouseEnter","onMouseLeave","showCheckAll","checkAll","dropdownAlign","dropdownClassName","dropdownMatchSelectWidth","dropdownMenuStyle","transitionName","animation","dropdownStyle","firstActiveValue","onDropdownMouseDown","getPopupContainer","getRootDomNode","onMenuSelect","onMenuDeselect","onPopupScroll","filterPlaceholder","getBuiltinPlacements","footer","onOuterBlur","onOuterFocus","renderFloatLabel","Component","SelectPropTypes","noop","optionFilterProp"],"mappings":"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","sourcesContent":["/* eslint func-names: 1 */\nimport Set from 'core-js/library/fn/set';\nimport React, { Children, cloneElement, Component } from 'react';\nimport { unmountComponentAtNode } from 'react-dom';\nimport classnames from 'classnames';\nimport classes from 'component-classes';\nimport warning from '../../_util/warning';\nimport noop from 'lodash/noop';\nimport KeyCode from '../../_util/KeyCode';\nimport childrenToArray from '../util/Children/toArray';\nimport { Item as MenuItem, ItemGroup as MenuItemGroup } from '../menu';\nimport Option from './Option';\nimport Button from '../../button';\nimport Ripple from '../../ripple';\n\nimport {\n  defaultFilterFn,\n  findFirstMenuItem,\n  findIndexInValueBySingleValue,\n  getLabelFromPropsValue,\n  getMapKey,\n  getPropValue,\n  getValuePropValue,\n  includesSeparators,\n  isCombobox,\n  isMultiple,\n  isMultipleOrTags,\n  isMultipleOrTagsOrCombobox,\n  isSingleMode,\n  isTags,\n  preventDefaultEvent,\n  saveRef,\n  splitBySeparators,\n  toArray,\n  UNSELECTABLE_ATTRIBUTE,\n  UNSELECTABLE_STYLE,\n  validateOptionValue,\n} from './util';\nimport SelectTrigger from './SelectTrigger';\nimport { SelectPropTypes } from './PropTypes';\n\nfunction chaining(...fns) {\n  return function (...args) { // eslint-disable-line\n    // eslint-disable-line\n    for (let i = 0; i < fns.length; i++) {\n      if (fns[i] && typeof fns[i] === 'function') {\n        fns[i].apply(this, args);\n      }\n    }\n  };\n}\n\nconst BUILT_IN_PLACEMENTS = {\n  bottomLeft: {\n    points: ['tl', 'tl'],\n    offset: [0, 4],\n    overflow: {\n      adjustX: 0,\n      adjustY: 1,\n    },\n  },\n  topLeft: {\n    points: ['bl', 'bl'],\n    offset: [0, -4],\n    overflow: {\n      adjustX: 0,\n      adjustY: 1,\n    },\n  },\n  bottomRight: {\n    points: ['tr', 'tr'],\n    offset: [0, 4],\n    overflow: {\n      adjustX: 0,\n      adjustY: 1,\n    },\n  },\n};\n\nconst BUILT_IN_PLACEMENTS_LABEL = {\n  bottomLeft: {\n    points: ['tl', 'tl'],\n    offset: [0, 19],\n    overflow: {\n      adjustX: 0,\n      adjustY: 1,\n    },\n  },\n  topLeft: {\n    points: ['bl', 'bl'],\n    offset: [0, -4],\n    overflow: {\n      adjustX: 0,\n      adjustY: 1,\n    },\n  },\n  bottomRight: {\n    points: ['tr', 'tr'],\n    offset: [0, 19],\n    overflow: {\n      adjustX: 0,\n      adjustY: 1,\n    },\n  },\n};\n\nexport default class Select extends Component {\n  static propTypes = SelectPropTypes;\n\n  static defaultProps = {\n    blurChange: true,\n    prefixCls: 'rc-select',\n    defaultOpen: false,\n    labelInValue: false,\n    defaultActiveFirstOption: true,\n    showSearch: true,\n    allowClear: false,\n    onInput: noop,\n    onChange: noop,\n    onFocus: noop,\n    onBlur: noop,\n    onSelect: noop,\n    onSearch: noop,\n    onDeselect: noop,\n    onInputKeyDown: noop,\n    onChoiceItemClick: noop,\n    onClear: noop,\n    showArrow: true,\n    dropdownMatchSelectWidth: true,\n    dropdownStyle: {},\n    dropdownMenuStyle: {},\n    optionFilterProp: 'value',\n    optionLabelProp: 'value',\n    notFoundContent: 'Not Found',\n    backfill: false,\n    tokenSeparators: [],\n    showNotFindInputItem: true,\n    showNotFindSelectedItem: true,\n    placeholder: '',\n    label: '',\n    filterPlaceholder: 'Input for filter',\n    showCheckAll: true,\n    loading: false,\n    border: true,\n  };\n\n  needExpand = true;\n\n  constructor(props) {\n    super(props);\n    const value = this.getValueFromProps(props);\n    const optionsInfo = this.getOptionsInfoFromProps(props);\n    let inputValue = '';\n    if (props.combobox) {\n      inputValue = value.length\n        ? this.getLabelBySingleValue(value[0], optionsInfo)\n        : '';\n    }\n    let open = props.open;\n    if (open === undefined) {\n      open = props.defaultOpen;\n    }\n    const filterValue = props.filterValue || '';\n    this.state = {\n      value,\n      inputValue,\n      open,\n      optionsInfo,\n      filterValue,\n    };\n    this.adjustOpenState();\n  }\n\n  componentDidMount() {\n    if (this.props.autoFocus) {\n      this.focus();\n    }\n  }\n\n  componentWillReceiveProps = nextProps => {\n    const optionsInfo = this.getOptionsInfoFromProps(nextProps);\n    this.setState({\n      optionsInfo,\n    });\n    if ('value' in nextProps) {\n      const value = this.getValueFromProps(nextProps);\n      this.setState({\n        value,\n      });\n      if (nextProps.combobox) {\n        this.setState({\n          inputValue: value.length\n            ? this.getLabelBySingleValue(value[0], optionsInfo)\n            : '',\n        });\n      }\n    }\n    if ('filterValue' in nextProps) {\n      this.setState({\n        filterValue: nextProps.filterValue,\n      });\n    }\n  };\n\n  componentWillUpdate(nextProps, nextState) {\n    this.props = nextProps;\n    this.state = nextState;\n    this.adjustOpenState();\n  }\n\n  componentDidUpdate() {\n    if (isMultipleOrTags(this.props)) {\n      const inputNode = this.getInputDOMNode();\n      const mirrorNode = this.getInputMirrorDOMNode();\n      if (inputNode.value) {\n        inputNode.style.width = '';\n        inputNode.style.width = `${mirrorNode.clientWidth}px`;\n      } else {\n        inputNode.style.width = '';\n      }\n      this.onChoiceAnimationLeave();\n    }\n  }\n\n  componentWillUnmount() {\n    this.clearFocusTime();\n    this.clearBlurTime();\n    this.clearAdjustTimer();\n    if (this.dropdownContainer) {\n      unmountComponentAtNode(this.dropdownContainer);\n      document.body.removeChild(this.dropdownContainer);\n      this.dropdownContainer = null;\n    }\n  }\n\n  onFilterChange = (val = '') => {\n    const { onFilterChange } = this.props;\n    this.onInputValueChange(val);\n    this.setState({\n      filterValue: val,\n    });\n    if (onFilterChange) {\n      onFilterChange(val);\n    }\n  };\n\n  onInputValueChange = (val) => {\n    const { tokenSeparators, onInput } = this.props;\n    onInput(val);\n    if (\n      isMultipleOrTags(this.props) &&\n      tokenSeparators.length &&\n      includesSeparators(val, tokenSeparators)\n    ) {\n      const nextValue = this.getValueByInput(val);\n      if (nextValue !== undefined) {\n        this.fireChange(nextValue);\n      }\n      this.setOpenState(false, true);\n      this.setInputValue('', false);\n      return;\n    }\n    this.setInputValue(val);\n    this.setState({\n      open: true,\n    });\n    if (isCombobox(this.props)) {\n      this.fireChange([val]);\n    }\n  };\n\n  onInputChange = (event) => {\n    const val = event.target.value;\n    this.onInputValueChange(val);\n  };\n\n  onDropdownVisibleChange = open => {\n    const { filter } = this.props;\n    if (this.needExpand) {\n      if (open && !this._focused) {\n        this.clearBlurTime();\n        this.timeoutFocus();\n        this._focused = true;\n        this.updateFocusClassName();\n      }\n      if (filter) {\n        this.onFilterChange('');\n      }\n      if (open && filter) {\n        setTimeout(() => {\n          const filterInput = this.selectTriggerRef.getFilterInput();\n          filterInput && filterInput.focus();\n        }, 20);\n      }\n      this.setOpenState(open);\n    }\n  };\n\n  // combobox ignore\n  onKeyDown = event => {\n    const props = this.props;\n    if (props.disabled) {\n      return;\n    }\n    const keyCode = event.keyCode;\n    if (this.state.open && !this.getInputDOMNode()) {\n      this.onInputKeyDown(event);\n    } else if (keyCode === KeyCode.ENTER || keyCode === KeyCode.DOWN) {\n      this.setOpenState(true);\n      event.preventDefault();\n    }\n  };\n\n  onInputKeyDown = event => {\n    const props = this.props;\n    if (props.disabled) {\n      return;\n    }\n    const state = this.state;\n    const keyCode = event.keyCode;\n    if (\n      isMultipleOrTags(props) &&\n      !event.target.value &&\n      keyCode === KeyCode.BACKSPACE\n    ) {\n      event.preventDefault();\n      const { value } = state;\n      if (value.length) {\n        this.removeSelected(value[value.length - 1], value.length - 1);\n      }\n      return;\n    }\n    if (keyCode === KeyCode.DOWN) {\n      if (!state.open) {\n        this.openIfHasChildren();\n        event.preventDefault();\n        event.stopPropagation();\n        return;\n      }\n    } else if (keyCode === KeyCode.ESC) {\n      if (state.open) {\n        this.setOpenState(false);\n        event.preventDefault();\n        event.stopPropagation();\n      }\n      return;\n    }\n\n    if (state.open) {\n      const menu = this.selectTriggerRef.getInnerMenu();\n      if (menu && menu.onKeyDown(event, this.handleBackfill)) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    }\n  };\n\n  onMenuSelect = ({ item }) => {\n    let value = this.state.value;\n    const props = this.props;\n    const selectedValue = getValuePropValue(item);\n    const lastValue = value[value.length - 1];\n    if (this.fireSelect(selectedValue) === false) {\n      return;\n    }\n    if (isMultipleOrTags(props)) {\n      if (findIndexInValueBySingleValue(value, selectedValue) !== -1) {\n        return;\n      }\n      value = value.concat([selectedValue]);\n    } else {\n      if (isCombobox(props)) {\n        this.skipAdjustOpen = true;\n        this.clearAdjustTimer();\n        this.skipAdjustOpenTimer = setTimeout(() => {\n          this.skipAdjustOpen = false;\n        }, 0);\n      }\n      if (lastValue && lastValue === selectedValue && selectedValue !== this.state.backfillValue) {\n        this.setOpenState(false, true);\n        return;\n      }\n      value = [selectedValue];\n      this.setOpenState(false, true);\n    }\n    this.fireChange(value);\n    let inputValue;\n    if (isCombobox(props)) {\n      inputValue = getPropValue(item, props.optionLabelProp);\n    } else {\n      inputValue = '';\n    }\n    if (!this.props.filter) {\n      this.setInputValue(inputValue, true);\n    }\n  };\n\n  onMenuDeselect = ({ item, domEvent }) => {\n    if (domEvent.type === 'keydown' && domEvent.keyCode === KeyCode.ENTER) {\n      this.removeSelected(getValuePropValue(item), null);\n      return;\n    }\n    if (domEvent.type === 'click') {\n      this.removeSelected(getValuePropValue(item), null);\n    }\n    const { props } = this;\n    if (props.autoClearSearchValue) {\n      this.setInputValue('', false);\n    }\n  };\n\n  onArrowClick = e => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (!this.props.disabled) {\n      this.onDropdownVisibleChange(!this.state.open);\n    }\n  };\n\n  onOuterFocus = (e) => {\n    if (this.props.disabled) {\n      e.preventDefault();\n      return;\n    }\n    this.clearBlurTime();\n    if (\n      !isMultipleOrTagsOrCombobox(this.props) &&\n      e.target === this.getInputDOMNode()\n    ) {\n      return;\n    }\n    if (this._focused) {\n      return;\n    }\n    this._focused = true;\n    this.updateFocusClassName();\n    // only effect multiple or tag mode\n    if (!isMultipleOrTags(this.props) || !this._mouseDown) {\n      this.timeoutFocus();\n    }\n  };\n\n  onPopupFocus = () => {\n    // fix ie scrollbar, focus element again\n    this.maybeFocus(true, true);\n  };\n\n  onOuterBlur = (e) => {\n    if (this.props.disabled) {\n      e.preventDefault();\n      return;\n    }\n    this.blurTimer = setTimeout(() => {\n      this._focused = false;\n      this.updateFocusClassName();\n      const props = this.props;\n      let { value } = this.state;\n      const { inputValue } = this.state;\n      if (\n        isSingleMode(props) &&\n        props.showSearch &&\n        inputValue &&\n        props.defaultActiveFirstOption\n      ) {\n        const options = this._options || [];\n        if (options.length) {\n          const firstOption = findFirstMenuItem(options);\n          if (firstOption) {\n            value = [firstOption.key];\n            this.fireChange(value);\n          }\n        }\n      } else if (isMultipleOrTags(props) && inputValue) {\n        if (this.props.blurChange) {\n          // why not use setState?\n          this.state.inputValue = this.getInputDOMNode().value = '';\n        }\n\n        value = this.getValueByInput(inputValue);\n        if (value !== undefined && this.props.blurChange) {\n          this.fireChange(value);\n        }\n      }\n      props.onBlur(this.getVLForOnChange(value));\n\n    }, 10);\n  };\n\n  onClearSelection = event => {\n    const props = this.props;\n    const state = this.state;\n    if (props.disabled) {\n      return;\n    }\n    const { inputValue, value } = state;\n    event.stopPropagation();\n    if (inputValue || value.length) {\n      props.onClear();\n      if (value.length) {\n        this.fireChange([]);\n      }\n      this.setOpenState(false, true);\n      if (inputValue) {\n        this.setInputValue('');\n      }\n    }\n  };\n\n  onChoiceAnimationLeave = () => {\n    this.selectTriggerRef.triggerRef.forcePopupAlign();\n  };\n\n  getValueFromProps = props => {\n    let value = [];\n    if ('value' in props) {\n      value = toArray(props.value);\n    } else {\n      value = toArray(props.defaultValue);\n    }\n    if (props.labelInValue) {\n      value = value.map((v) => {\n        return v.key;\n      });\n    }\n    if (isMultiple(props)) {\n      value = value.filter((v) => {\n        return !!v;\n      });\n    }\n    return value;\n  };\n\n  getOptionsInfoFromProps = props => {\n    const options = this.getOptionsFromChildren(props.children);\n    const oldOptionsInfo = this.state ? this.state.optionsInfo : {};\n    const value = this.state ? this.state.value : [];\n    const optionsInfo = {};\n    options.forEach((option) => {\n      const singleValue = getValuePropValue(option);\n      optionsInfo[getMapKey(singleValue)] = {\n        option,\n        value: singleValue,\n        label: this.getLabelFromOption(option),\n        title: option.props.title,\n      };\n    });\n    value.forEach(v => {\n      const key = getMapKey(v);\n      if (!optionsInfo[key]) {\n        optionsInfo[key] = oldOptionsInfo[key];\n      }\n    });\n    return optionsInfo;\n  };\n\n  getOptionInfoBySingleValue = (value, optionsInfo) => {\n    let info;\n    optionsInfo = optionsInfo || this.state.optionsInfo;\n    if (optionsInfo[getMapKey(value)]) {\n      info = optionsInfo[getMapKey(value)];\n    }\n    if (info) {\n      return info;\n    }\n    let defaultLabel = value;\n    if (this.props.labelInValue) {\n      const label = getLabelFromPropsValue(this.props.value, value);\n      if (label !== undefined) {\n        defaultLabel = label;\n      }\n    }\n    const defaultInfo = {\n      option: <Option value={value} key={value}>{value}</Option>,\n      value,\n      label: defaultLabel,\n    };\n    return defaultInfo;\n  };\n\n  getOptionBySingleValue = value => {\n    const { option } = this.getOptionInfoBySingleValue(value);\n    return option;\n  };\n\n  getOptionsBySingleValue = values => {\n    return values.map(value => {\n      return this.getOptionBySingleValue(value);\n    });\n  };\n\n  getOptionsFromChildren = (children, options = []) => {\n    Children.forEach(children, child => {\n      if (!child) {\n        return;\n      }\n      if (child.type.isSelectOptGroup) {\n        this.getOptionsFromChildren(child.props.children, options);\n      } else {\n        options.push(child);\n      }\n    });\n    return options;\n  };\n\n  getValueByLabel = (label) => {\n    if (label === undefined) {\n      return null;\n    }\n    let value = null;\n    Object.keys(this.state.optionsInfo).forEach(key => {\n      const info = this.state.optionsInfo[key];\n      if (toArray(info.label).join('') === label) {\n        value = info.value;\n      }\n    });\n    return value;\n  };\n\n  getLabelFromOption = option => {\n    return getPropValue(option, this.props.optionLabelProp);\n  };\n\n  getVLBySingleValue = value => {\n    if (this.props.labelInValue) {\n      return {\n        key: value,\n        label: this.getLabelBySingleValue(value),\n      };\n    }\n    return value;\n  };\n\n  getVLForOnChange = vls_ => {\n    let vls = vls_;\n    if (vls !== undefined) {\n      if (!this.props.labelInValue) {\n        vls = vls.map(v => v);\n      } else {\n        vls = vls.map(vl => ({\n          key: vl,\n          label: this.getLabelBySingleValue(vl),\n        }));\n      }\n      return isMultipleOrTags(this.props) ? vls : vls[0];\n    }\n    return vls;\n  };\n\n  getLabelBySingleValue = (value, optionsInfo) => {\n    const { label } = this.getOptionInfoBySingleValue(value, optionsInfo);\n    return label;\n  };\n\n  getDropdownContainer = () => {\n    if (!this.dropdownContainer) {\n      this.dropdownContainer = document.createElement('div');\n      document.body.appendChild(this.dropdownContainer);\n    }\n    return this.dropdownContainer;\n  };\n\n  getPlaceholderElement = () => {\n    const { placeholder, prefixCls, border } = this.props;\n    if (!border && placeholder) {\n      return (\n        <div className={`${prefixCls}-selection__placeholder`}>\n          {placeholder}\n        </div>\n      );\n    }\n    return null;\n  };\n\n  getInputElement = () => {\n    const props = this.props;\n    const inputElement = props.getInputElement\n      ? props.getInputElement()\n      : <input id={props.id} autoComplete=\"off\" />;\n    const inputCls = classnames(inputElement.props.className, {\n      [`${props.prefixCls}-search__field`]: true,\n    });\n    // Add space to the end of the inputValue as the width measurement tolerance\n    return (\n      <div className={`${props.prefixCls}-search__field__wrap`}>\n        {cloneElement(inputElement, {\n          ref: saveRef(this, 'inputRef'),\n          onChange: this.onInputChange,\n          onKeyDown: chaining(\n            this.onInputKeyDown,\n            inputElement.props.onKeyDown,\n            this.props.onInputKeyDown,\n          ),\n          value: this.state.inputValue,\n          disabled: props.disabled,\n          className: inputCls,\n        })}\n        <span\n          ref={saveRef(this, 'inputMirrorRef')}\n          className={`${props.prefixCls}-search__field__mirror`}\n        >\n          {this.state.inputValue}&nbsp;\n        </span>\n      </div>\n    );\n  };\n\n  getInputDOMNode = () => {\n    return this.topCtrlRef\n      ? this.topCtrlRef.querySelector('input,textarea,div[contentEditable]')\n      : this.inputRef;\n  };\n\n  getInputMirrorDOMNode = () => {\n    return this.inputMirrorRef;\n  };\n\n  getPopupDOMNode = () => {\n    return this.selectTriggerRef.getPopupDOMNode();\n  };\n\n  getPopupMenuComponent = () => {\n    return this.selectTriggerRef.getInnerMenu();\n  };\n\n  setOpenState = (open, needFocus) => {\n    const { props, state } = this;\n    if (state.open === open) {\n      this.maybeFocus(open, needFocus);\n      return;\n    }\n    const nextState = {\n      open,\n      backfillValue: undefined,\n    };\n    // clear search input value when open is false in singleMode.\n    if (!open && isSingleMode(props) && props.showSearch) {\n      this.setInputValue('');\n    }\n    if (!open) {\n      this.maybeFocus(open, needFocus);\n    }\n    this.setState(nextState, () => {\n      if (open) {\n        this.maybeFocus(open, needFocus);\n      }\n    });\n  };\n\n  setInputValue = (inputValue, fireSearch = true) => {\n    if (inputValue !== this.state.inputValue) {\n      this.setState({\n        inputValue,\n      });\n      if (fireSearch) {\n        this.props.onSearch(inputValue);\n      }\n    }\n  };\n\n  getValueByInput = string => {\n    const { multiple, tokenSeparators } = this.props;\n    let nextValue = this.state.value;\n    let hasNewValue = false;\n    splitBySeparators(string, tokenSeparators).forEach(label => {\n      const selectedValue = [label];\n      if (multiple) {\n        const value = this.getValueByLabel(label);\n        if (value && findIndexInValueBySingleValue(nextValue, value) === -1) {\n          nextValue = nextValue.concat(value);\n          hasNewValue = true;\n          this.fireSelect(value);\n        }\n      } else {\n        // tag\n        if (findIndexInValueBySingleValue(nextValue, label) === -1) {\n          nextValue = nextValue.concat(selectedValue);\n          hasNewValue = true;\n          this.fireSelect(label);\n        }\n      }\n    });\n    return hasNewValue ? nextValue : undefined;\n  };\n\n  getRealOpenState = (state) => {\n    const { open: _open } = this.props;\n    if (typeof _open === 'boolean') {\n      return _open;\n    }\n    let open = (state || this.state).open;\n    const options = this._options || [];\n    if (isMultipleOrTagsOrCombobox(this.props) || !this.props.showSearch) {\n      if (open && !options.length) {\n        open = false;\n      }\n    }\n    return open;\n  };\n\n  focus = () => {\n    if (isSingleMode(this.props)) {\n      this.selectionRef.focus();\n    } else {\n      this.getInputDOMNode().focus();\n    }\n  };\n\n  blur = () => {\n    if (isSingleMode(this.props)) {\n      this.selectionRef.blur();\n    } else {\n      this.getInputDOMNode().blur();\n    }\n  };\n\n  handleBackfill = (item) => {\n    if (!this.props.backfill || !(isSingleMode(this.props) || isCombobox(this.props))) {\n      return;\n    }\n\n    const key = getValuePropValue(item);\n\n    if (isCombobox(this.props)) {\n      this.setInputValue(key, false);\n    }\n\n    this.setState({\n      value: [key],\n      backfillValue: key,\n    });\n  };\n\n  filterOption = (input, child, defaultFilter = defaultFilterFn) => {\n    const { value } = this.state;\n    const lastValue = value[value.length - 1];\n    if (!input || (lastValue && lastValue === this.state.backfillValue)) {\n      return true;\n    }\n    let filterFn = this.props.filterOption;\n    if ('filterOption' in this.props) {\n      if (this.props.filterOption === true) {\n        filterFn = defaultFilter;\n      }\n    } else {\n      filterFn = defaultFilter;\n    }\n\n    if (!filterFn) {\n      return true;\n    } else if (typeof filterFn === 'function') {\n      return filterFn.call(this, input, child);\n    } else if (child.props.disabled) {\n      return false;\n    }\n    return true;\n  };\n\n  timeoutFocus = () => {\n    if (this.focusTimer) {\n      this.clearFocusTime();\n    }\n    this.focusTimer = setTimeout(() => {\n      this.props.onFocus();\n    }, 10);\n  };\n\n  clearFocusTime = () => {\n    if (this.focusTimer) {\n      clearTimeout(this.focusTimer);\n      this.focusTimer = null;\n    }\n  };\n\n  clearBlurTime = () => {\n    if (this.blurTimer) {\n      clearTimeout(this.blurTimer);\n      this.blurTimer = null;\n    }\n  };\n\n  clearAdjustTimer = () => {\n    if (this.skipAdjustOpenTimer) {\n      clearTimeout(this.skipAdjustOpenTimer);\n      this.skipAdjustOpenTimer = null;\n    }\n  };\n\n  updateFocusClassName = () => {\n    const { rootRef, props } = this;\n    // avoid setState and its side effect\n    if (this._focused) {\n      classes(rootRef).add(`${props.prefixCls}-focused`);\n    } else {\n      classes(rootRef).remove(`${props.prefixCls}-focused`);\n    }\n  };\n\n  maybeFocus = (open, needFocus) => {\n    if (needFocus || open) {\n      const input = this.getInputDOMNode();\n      const { activeElement } = document;\n      if (input && (open || isMultipleOrTagsOrCombobox(this.props))) {\n        if (activeElement !== input) {\n          input.focus();\n          this._focused = true;\n        }\n      } else {\n        if (activeElement !== this.selectionRef) {\n          this.selectionRef.focus();\n          this._focused = true;\n        }\n      }\n    }\n  };\n\n  handleChoiceItemClick = (selectedKey, e) => {\n    const props = this.props;\n    if (props.disabled || this.isChildDisabled(selectedKey)) {\n      return;\n    }\n    if (!e.isDefaultPrevented()) {\n      props.onChoiceItemClick(this.getVLBySingleValue(selectedKey), this.getOptionBySingleValue(selectedKey));\n    }\n  };\n\n  removeSelected = (selectedKey, index, e) => {\n    this.needExpand = false;\n    setTimeout(() => {\n      this.needExpand = true;\n    }, 100);\n    if (e) {\n      e.preventDefault();\n    }\n    const props = this.props;\n    if (props.disabled || this.isChildDisabled(selectedKey)) {\n      return;\n    }\n    const value = this.state.value.filter((singleValue, i) => {\n      return singleValue !== selectedKey || (index !== null && i !== index);\n    });\n    const canMultiple = isMultipleOrTags(props);\n\n    if (canMultiple) {\n      let event = selectedKey;\n      if (props.labelInValue) {\n        event = {\n          key: selectedKey,\n          label: this.getLabelBySingleValue(selectedKey),\n        };\n      }\n      props.onDeselect(event, this.getOptionBySingleValue(selectedKey), index);\n      if (typeof props.onChoiceRemove === 'function') {\n        props.onChoiceRemove(selectedKey);\n      }\n    }\n    this.fireChange(value);\n  };\n\n  openIfHasChildren = () => {\n    const props = this.props;\n    if (Children.count(props.children) || isSingleMode(props)) {\n      this.setOpenState(true);\n    }\n  };\n\n  fireSelect = value => {\n    return this.props.onSelect(this.getVLBySingleValue(value), this.getOptionBySingleValue(value));\n  };\n\n  fireChange = value => {\n    const props = this.props;\n    if (!('value' in props)) {\n      this.setState({\n        value,\n      });\n    }\n    const vls = this.getVLForOnChange(value);\n    const options = this.getOptionsBySingleValue(value);\n    props.onChange(vls, isMultipleOrTags(this.props) ? options : options[0]);\n  };\n\n  isChildDisabled = key => {\n    return childrenToArray(this.props.children).some(child => {\n      const childValue = getValuePropValue(child);\n      return childValue === key && child.props && child.props.disabled;\n    });\n  };\n\n  adjustOpenState = () => {\n    if (this.skipAdjustOpen) {\n      return;\n    }\n    let { open } = this.state;\n    let options = [];\n    // If hidden menu due to no options, then it should be calculated again\n    if (open || this.hiddenForNoOptions) {\n      options = this.renderFilterOptions();\n    }\n    this._options = options;\n\n    if (isMultipleOrTagsOrCombobox(this.props) || !this.props.showSearch) {\n      if (open && !options.length) {\n        open = false;\n        this.hiddenForNoOptions = true;\n      }\n      // Keep menu open if there are options and hidden for no options before\n      if (this.hiddenForNoOptions && options.length) {\n        open = true;\n        this.hiddenForNoOptions = false;\n      }\n    }\n    this.state.open = open;\n  };\n\n  renderFilterOptions = () => {\n    const { inputValue } = this.state;\n    const { children, tags, filterOption, notFoundContent, showNotFindInputItem, showNotFindSelectedItem } = this.props;\n    const menuItems = [];\n    const childrenKeys = [];\n    let options = this.renderFilterOptionsFromChildren(\n      children,\n      childrenKeys,\n      menuItems,\n    );\n    if (tags) {\n      if (showNotFindSelectedItem) {\n        // tags value must be string\n        let value = this.state.value || [];\n        value = value.filter(singleValue => {\n          return (\n            childrenKeys.indexOf(singleValue) === -1 &&\n            (!inputValue ||\n              String(singleValue).indexOf(String(inputValue)) > -1)\n          );\n        });\n        value.forEach(singleValue => {\n          const key = singleValue;\n          const menuItem = (\n            <MenuItem\n              style={UNSELECTABLE_STYLE}\n              attribute={UNSELECTABLE_ATTRIBUTE}\n              value={key}\n              key={key}\n            >\n              {key}\n            </MenuItem>\n          );\n          options.push(menuItem);\n          menuItems.push(menuItem);\n        });\n      }\n      if (inputValue && showNotFindInputItem) {\n        const notFindInputItem = menuItems.every(option => {\n          // this.filterOption return true has two meaning,\n          // 1, some one exists after filtering\n          // 2, filterOption is set to false\n          // condition 2 does not mean the option has same value with inputValue\n          const filterFn = () => getValuePropValue(option) === inputValue;\n          if (filterOption !== false) {\n            return !this.filterOption.call(\n              this,\n              inputValue,\n              option,\n              filterFn,\n            );\n          }\n          return !filterFn();\n        });\n        if (notFindInputItem) {\n          options.unshift(\n            <MenuItem\n              style={UNSELECTABLE_STYLE}\n              attribute={UNSELECTABLE_ATTRIBUTE}\n              value={inputValue}\n              onMouseDown={preventDefaultEvent}\n              key={inputValue}\n            >\n              {inputValue}\n            </MenuItem>,\n          );\n        }\n      }\n    }\n    let loading = this.props.loading;\n    if (typeof loading === 'boolean') {\n      loading = {\n        spinning: loading,\n      };\n    }\n    if (!options.length && notFoundContent) {\n      options = [\n        <MenuItem\n          style={UNSELECTABLE_STYLE}\n          attribute={UNSELECTABLE_ATTRIBUTE}\n          disabled\n          value=\"NOT_FOUND\"\n          key=\"NOT_FOUND\"\n        >\n          {loading.spinning ? '' : notFoundContent}\n        </MenuItem>,\n      ];\n    }\n    return options;\n  };\n\n  renderFilterOptionsFromChildren = (children, childrenKeys, menuItems) => {\n    const sel = [];\n    const props = this.props;\n    const { inputValue } = this.state;\n    const tags = props.tags;\n    Children.forEach(children, child => {\n      if (!child) {\n        return;\n      }\n      if (child.type.isSelectOptGroup) {\n        const innerItems = this.renderFilterOptionsFromChildren(\n          child.props.children,\n          childrenKeys,\n          menuItems,\n        );\n        if (innerItems.length) {\n          let label = child.props.label;\n          let key = child.key;\n          // if (!key && typeof label === 'string') {\n          //   key = label;\n          // }\n          // else if (!label && key) {\n          //   label = key;\n          // }\n          sel.push(\n            <MenuItemGroup key={key} title={label}>\n              {innerItems}\n            </MenuItemGroup>,\n          );\n        }\n        return;\n      }\n\n      warning(\n        child.type.isSelectOption,\n        'the children of `Select` should be `Select.Option` or `Select.OptGroup`, ' +\n        `instead of \\`${child.type.name ||\n        child.type.displayName ||\n        child.type}\\`.`,\n      );\n\n      const childValue = getValuePropValue(child);\n\n      validateOptionValue(childValue, this.props);\n\n      if (this.filterOption(inputValue, child)) {\n        const menuItem = (\n          <MenuItem\n            style={UNSELECTABLE_STYLE}\n            attribute={UNSELECTABLE_ATTRIBUTE}\n            value={childValue}\n            key={childValue}\n            {...child.props}\n          />\n        );\n        sel.push(menuItem);\n        menuItems.push(menuItem);\n      }\n      if (tags && !child.props.disabled) {\n        childrenKeys.push(childValue);\n      }\n    });\n\n    return sel;\n  };\n\n  isChoiceRemove = (selectedKey) => {\n    const { choiceRemove } = this.props;\n    if (typeof choiceRemove === 'function') {\n      return choiceRemove(selectedKey);\n    }\n    return choiceRemove;\n  };\n\n  renderTopControlNode = () => {\n    const { value, open, inputValue } = this.state;\n    const props = this.props;\n    const tags = isTags(props);\n    const {\n      prefixCls,\n      maxTagTextLength,\n      maxTagCount,\n      maxTagPlaceholder,\n      showSearch,\n      choiceRender,\n    } = props;\n    const className = `${prefixCls}-selection__rendered`;\n    // search input is inside topControlNode in single, multiple & combobox. 2016/04/13\n    let innerNode = null;\n    if (isSingleMode(props)) {\n      let selectedValue = null;\n      let opacity = 1;\n      if (value.length) {\n        let showSelectedValue = false;\n        if (showSearch && open) {\n          showSelectedValue = !inputValue;\n          if (showSelectedValue) {\n            opacity = 0.4;\n          }\n        }\n      }\n      const singleValue = value && value[0];\n      const { label, title } = this.getOptionInfoBySingleValue(singleValue);\n      selectedValue = (\n        <div\n          key=\"value\"\n          className={`${prefixCls}-selection-selected-value`}\n          title={title || label}\n          style={{\n            opacity,\n          }}\n        >\n          {choiceRender ? choiceRender(label) : label}\n        </div>\n      );\n      innerNode = [selectedValue];\n    } else {\n      let selectedValueNodes = [];\n      let limitedCountValue = value;\n      let maxTagPlaceholderEl;\n      if (maxTagCount !== undefined && value.length > maxTagCount) {\n        limitedCountValue = limitedCountValue.slice(0, maxTagCount);\n        const omittedValues = this.getVLForOnChange(value.slice(maxTagCount, value.length));\n        let content = `+ ${value.length - maxTagCount} ...`;\n        if (maxTagPlaceholder) {\n          content = typeof maxTagPlaceholder === 'function' ? maxTagPlaceholder(omittedValues) : maxTagPlaceholder;\n        }\n        maxTagPlaceholderEl = (<li\n          style={UNSELECTABLE_STYLE}\n          {...UNSELECTABLE_ATTRIBUTE}\n          onMouseDown={preventDefaultEvent}\n          className={`${prefixCls}-selection__choice ${prefixCls}-selection__choice__disabled ${prefixCls}-selection__max`}\n          key={'maxTagPlaceholder'}\n          // title={content}\n        >\n          <div className={`${prefixCls}-selection__choice__content`}>{content}</div>\n        </li>);\n      }\n      if (isMultipleOrTags(props)) {\n        selectedValueNodes = limitedCountValue.map((singleValue, index) => {\n          const info = this.getOptionInfoBySingleValue(singleValue);\n          let content = info.label;\n          const title = info.title || content;\n          if (\n            maxTagTextLength &&\n            typeof content === 'string' &&\n            content.length > maxTagTextLength\n          ) {\n            content = `${content.slice(0, maxTagTextLength)}...`;\n          }\n          const disabled = this.isChildDisabled(singleValue);\n          const choiceClassName = disabled\n            ? `${prefixCls}-selection__choice ${prefixCls}-selection__choice__disabled`\n            : `${prefixCls}-selection__choice`;\n          const li = (<li\n            style={UNSELECTABLE_STYLE}\n            {...UNSELECTABLE_ATTRIBUTE}\n            onMouseDown={preventDefaultEvent}\n            onClick={this.handleChoiceItemClick.bind(this, singleValue)}\n            className={choiceClassName}\n            // title={title}\n          >\n            <div className={`${prefixCls}-selection__choice__content`}>\n              {content}\n            </div>\n            {disabled || !this.isChoiceRemove(singleValue) ? null : (\n              <span\n                className={`${prefixCls}-selection__choice__remove`}\n                onClick={this.removeSelected.bind(this, singleValue, index)}\n              >\n                <i className=\"icon icon-cancel\" />\n              </span>)}\n          </li>);\n          return (\n            <Ripple\n              key={singleValue + limitedCountValue.slice(0, index).filter(foundValue => foundValue === singleValue).length}\n            >\n              {choiceRender ? choiceRender(li, singleValue) : li}\n            </Ripple>\n          );\n        });\n        if (maxTagPlaceholderEl) {\n          selectedValueNodes.push(maxTagPlaceholderEl);\n        }\n        selectedValueNodes.push(\n          <li\n            className={`${prefixCls}-search ${prefixCls}-search--inline`}\n            key=\"__input\"\n          >\n            {this.getInputElement()}\n          </li>,\n        );\n      } else {\n        selectedValueNodes.push(\n          <div\n            className={`${prefixCls}-search ${prefixCls}-search--inline`}\n            key=\"__input\"\n            style={{ display: 'inline-block' }}\n          >\n            {this.getInputElement()}\n          </div>,\n        );\n      }\n\n      if (isMultipleOrTags(props)) {\n        innerNode = (\n          <ul>\n            {selectedValueNodes}\n          </ul>\n        );\n      } else {\n        innerNode = selectedValueNodes;\n      }\n    }\n    return (\n      <div className={className} ref={saveRef(this, 'topCtrlRef')}>\n        {this.getPlaceholderElement()}\n        {innerNode}\n        {this.renderClear()}\n        {tags || !props.showArrow ? null : (\n          <span\n            key=\"arrow\"\n            className={`${prefixCls}-arrow`}\n            style={UNSELECTABLE_STYLE}\n            {...UNSELECTABLE_ATTRIBUTE}\n            onClick={this.onArrowClick}\n          >\n          <i className=\"icon icon-arrow_drop_down\"></i>\n          <b />\n          </span>\n        )}\n      </div>\n    );\n  };\n\n  getBuiltinPlacements() {\n    const { builtinPlacements, label } = this.props;\n    if (builtinPlacements) {\n      return builtinPlacements;\n    }\n    if (!isTags(this.props) && !isCombobox(this.props)) {\n      if (label) {\n        return BUILT_IN_PLACEMENTS_LABEL;\n      }\n      return BUILT_IN_PLACEMENTS;\n    }\n  }\n\n  checkAll = (event) => {\n    const name = event.target.getAttribute('name');\n    const props = this.props;\n    const state = this.state;\n    if (props.disabled) {\n      return;\n    }\n\n    let newValues;\n    const values = this._options.filter((option) => {\n      // \n      return option.props.disabled !== true;\n    }).map((option) => {\n      return getValuePropValue(option);\n    });\n    if (name === 'check-all') {\n      newValues = new Set(state.value.concat(values));\n      this.fireChange(Array.from(newValues));\n    } else if (name === 'check-none') {\n      newValues = state.value.filter((e) => values.indexOf(e) < 0);\n      this.fireChange(newValues);\n      this.focus();\n    }\n  };\n\n  renderClear() {\n    const { prefixCls, allowClear } = this.props;\n    const { value, inputValue } = this.state;\n    const clear = (\n      <Button\n        key=\"clear\"\n        className={`${prefixCls}-clear`}\n        style={UNSELECTABLE_STYLE}\n        {...UNSELECTABLE_ATTRIBUTE}\n        shape=\"circle\"\n        icon=\"close\"\n        size=\"small\"\n        onClick={this.onClearSelection}\n        onMouseDown={preventDefaultEvent}\n      />\n    );\n    if (!allowClear) {\n      return null;\n    }\n    if (isCombobox(this.props)) {\n      if (inputValue) {\n        return clear;\n      }\n      return null;\n    }\n    if (inputValue || value.length) {\n      return clear;\n    }\n    return null;\n  }\n\n  getLabel() {\n    const { placeholder, label } = this.props;\n    if (!this.hasValue() && placeholder) {\n      return placeholder;\n    }\n    return label;\n  }\n\n  renderFloatLabel() {\n    const label = this.getLabel();\n    const { prefixCls, border } = this.props;\n    if (label && border) {\n      return (\n        <div className={`${prefixCls}-label-wrapper`}>\n          <div className={`${prefixCls}-label`}>{label}</div>\n        </div>\n      );\n    }\n  }\n\n  hasValue() {\n    const { value, inputValue } = this.state;\n    return inputValue || (value.length && value[0]);\n  }\n\n  render() {\n    const props = this.props;\n    const state = this.state;\n    const {\n      className,\n      disabled,\n      prefixCls,\n      label,\n      loading,\n      border,\n    } = props;\n    const { open, value, inputValue } = this.state;\n    const multiple = isMultipleOrTags(props);\n    const ctrlNode = this.renderTopControlNode();\n    let extraSelectionProps = {};\n    const options = this._options;\n    if (!isMultipleOrTagsOrCombobox(props)) {\n      extraSelectionProps = {\n        ...extraSelectionProps,\n        onKeyDown: this.onKeyDown,\n        tabIndex: disabled ? -1 : 0,\n      };\n    }\n\n    const rootCls = {\n      [className]: !!className,\n      [prefixCls]: 1,\n      [`${prefixCls}-open`]: open,\n      [`${prefixCls}-focused`]: !isMultiple(props) && this._focused,\n      [`${prefixCls}-has-value`]: this.hasValue(),\n      [`${prefixCls}-has-label`]: label,\n      [`${prefixCls}-combobox`]: isCombobox(props),\n      [`${prefixCls}-disabled`]: disabled,\n      [`${prefixCls}-enabled`]: !disabled,\n      [`${prefixCls}-allow-clear`]: !!props.allowClear,\n      [`${prefixCls}-tags`]: isTags(props),\n      [`${prefixCls}-multiple`]: isMultiple(props),\n      [`${prefixCls}-has-border`]: border,\n    };\n    return (\n      <SelectTrigger\n        onPopupFocus={this.onPopupFocus}\n        onMouseEnter={props.onMouseEnter}\n        onMouseLeave={props.onMouseLeave}\n        checkAll={props.showCheckAll ? this.checkAll : undefined}\n        dropdownAlign={props.dropdownAlign}\n        dropdownClassName={props.dropdownClassName}\n        dropdownMatchSelectWidth={props.dropdownMatchSelectWidth}\n        defaultActiveFirstOption={props.defaultActiveFirstOption}\n        dropdownMenuStyle={props.dropdownMenuStyle}\n        transitionName={props.transitionName}\n        animation={props.animation}\n        prefixCls={props.prefixCls}\n        dropdownStyle={props.dropdownStyle}\n        combobox={props.combobox}\n        showSearch={props.showSearch}\n        options={options}\n        multiple={multiple}\n        disabled={disabled}\n        visible={open}\n        inputValue={state.inputValue}\n        value={state.value}\n        loading={loading}\n        filter={props.filter}\n        filterValue={state.filterValue}\n        backfillValue={state.backfillValue}\n        firstActiveValue={props.firstActiveValue}\n        onFilterChange={this.onFilterChange}\n        onDropdownVisibleChange={this.onDropdownVisibleChange}\n        onDropdownMouseDown={props.onDropdownMouseDown}\n        getPopupContainer={props.getPopupContainer}\n        getRootDomNode={props.getRootDomNode}\n        onMenuSelect={this.onMenuSelect}\n        onMenuDeselect={this.onMenuDeselect}\n        onPopupScroll={props.onPopupScroll}\n        onKeyDown={chaining(\n          this.onInputKeyDown,\n          this.props.onInputKeyDown,\n        )}\n        filterPlaceholder={props.filterPlaceholder}\n        builtinPlacements={this.getBuiltinPlacements()}\n        footer={props.footer}\n        ref={saveRef(this, 'selectTriggerRef')}\n      >\n        <div\n          style={props.style}\n          ref={saveRef(this, 'rootRef')}\n          onBlur={this.onOuterBlur}\n          onFocus={this.onOuterFocus}\n          className={classnames(rootCls)}\n        >\n          <div\n            ref={saveRef(this, 'selectionRef')}\n            key=\"selection\"\n            className={`${prefixCls}-selection\n            ${prefixCls}-selection--${multiple ? 'multiple' : 'single'}`}\n            role=\"combobox\"\n            aria-autocomplete=\"list\"\n            aria-haspopup=\"true\"\n            aria-expanded={open}\n            {...extraSelectionProps}\n          >\n            {ctrlNode}\n            {this.renderFloatLabel()}\n          </div>\n        </div>\n      </SelectTrigger>\n    );\n  }\n}\n\nSelect.displayName = 'Select';\n"]}